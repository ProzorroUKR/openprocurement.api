@startuml
start

note
На попередньому етапі **замовник**
обирає переможця - **постачальника**
endnote

repeat

:Стрворюється нова "версія" контракту;



split
    partition Signing {
        repeat

            if (\nЦя версія контракту була створена через\n відмову **замовника** підписувати попередню\n) then (так)
                split
                    :**Замовник** \nзмінює "контракт";
                    :**Замовник** \nпідписує "контракт";
                split again
                    :**Постачальник** \nпідписує "контракт";
                end split
            elseif (\nЦя версія контракту була створена через\n відмову **постачальника** підписувати попередню?\n) then (так)
                split
                    :**Замовник** \nпідписує "контракт";
                split again
                    :**Постачальник** \nзмінює "контракт";
                    :**Постачальник** \nпідписує "контракт";
                end split
            else (Це перша версія контракту)
                 split
                    :**Замовник** \nпідписує "контракт";
                split again
                    :**Постачальник** \nпідписує "контракт";
                end split
            endif

        repeat while (Підписи накладено після останніх змін?) is (ні) not (так);
    }
split again
    partition Cancellation {
        split
        :**Постачальник** \nвідхиляє контракт;
        split again
        :**Замовник** \nвідхиляє контракт;
        end split
    }
end split




repeat while (Контракт відхилено хоча б однією зі сторін?) is (Так. Контракт cancelled. Буде створено інший з цим постачальником) not (ні);


:Контракт "активовано" в системі;
stop



legend left
  "контрактом" на цій діаграмі для скорочення називається json представлення "електронних полів",
  тобто чвстини даних контракту, яка існує в апі у вигляді окремих полів.
endlegend



@enduml