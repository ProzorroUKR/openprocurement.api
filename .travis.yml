language: python
sudo: required
group: deprecated-2017Q4
before_script:
  - sudo add-apt-repository ppa:chris-lea/libsodium -y
  - sudo apt-get -qq update
  - sudo apt-get install libsodium13 -y
python:
  - "2.7"
services:
  - couchdb
env:
  global:
    - TZ=Europe/Kiev
  matrix:
    - SANDBOX_MODE=
    - SANDBOX_MODE=True
cache:
  directories:
    - eggs
before_install:
  - pip install setuptools==7.0
  - python2 bootstrap.py
  - if [ -z ${TRAVIS_PULL_REQUEST_BRANCH}]; then export BRANCH=$TRAVIS_BRANCH; else export BRANCH=$TRAVIS_PULL_REQUEST_BRANCH; fi
install:
  - bin/buildout -N
script:
  - bin/nosetests src/openprocurement/api docs.py
after_success:
  - bin/coveralls
  - ./push_http_files.sh
